{"version":3,"sources":["webpack:///./src/utils/glowParticle.js","webpack:///./src/pages/404.js"],"names":["PI2","Math","PI","GlowParticle","x","y","radius","rgb","this","vx","random","vy","sinValue","animate","ctx","stageWidth","stageHeight","sin","beginPath","g","createRadialGradient","addColorStop","r","b","fillStyle","arc","fill","COLORS","Container","styled","main","Divider","div","TitleWrap","Title","h1","Desc","h2","Canvas","canvas","NotFound","canvasRef","useRef","useState","particles","setParticles","isCreated","requestRef","url","pathname","test","length","substring","split","pop","getPreviousPageUrl","useLocation","noThrow","to","useLayoutEffect","canvasObj","current","getContext","document","body","clientWidth","clientHeight","pixelRatio","window","devicePixelRatio","maxRadius","max","floor","minRadius","resize","width","height","scale","globalCompositeOperation","clearRect","colorIndex","i","newParticle","prevParticles","createParticles","render","item","requestAnimationFrame","addEventListener","removeEventListener","cancelAnimationFrame","title","ref"],"mappings":"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","file":"component---src-pages-404-js-e4510e16bba6868ee272.js","sourcesContent":["const PI2 = Math.PI * 2;\n\nclass GlowParticle {\n  constructor({ x, y, radius, rgb }) {\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n    this.rgb = rgb;\n\n    this.vx = Math.random() * 4;\n    this.vy = Math.random() * 4;\n\n    this.sinValue = Math.random();\n  }\n\n  animate(ctx, stageWidth, stageHeight) {\n    this.sinValue += 0.01;\n    this.radius += Math.sin(this.sinValue);\n    this.x += this.vx;\n    this.y += this.vy;\n\n    if (this.x < 0) {\n      this.vx *= -1;\n      this.x += 10;\n    } else if (this.x > stageWidth) {\n      this.vx *= -1;\n      this.x -= 10;\n    }\n\n    if (this.y < 0) {\n      this.vy *= -1;\n      this.y += 10;\n    } else if (this.y > stageHeight) {\n      this.vy *= -1;\n      this.y -= 10;\n    }\n\n    ctx.beginPath();\n\n    const g = ctx.createRadialGradient(\n      this.x,\n      this.y,\n      this.radius * 0.01,\n      this.x,\n      this.y,\n      this.radius\n    );\n\n    g.addColorStop(0, `rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, 1)`);\n    g.addColorStop(1, `rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, 0)`);\n\n    ctx.fillStyle = g;\n    ctx.arc(this.x, this.y, this.radius, 0, PI2, false);\n    ctx.fill();\n  }\n}\n\nexport default GlowParticle;\n","import React, { useState, useLayoutEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport SEO from 'components/seo';\nimport Layout from 'layout/layout';\nimport GlowParticle from 'utils/glowParticle';\nimport { Redirect } from '@reach/router'\nimport { useLocation } from '@reach/router';\n\nconst COLORS = [\n  { r: 255, g: 149, b: 0 }, // orange\n  { r: 255, g: 45, b: 85 }, // pink\n  { r: 175, g: 82, b: 222 }, // purple\n  { r: 255, g: 59, b: 48 }, // red\n  { r: 255, g: 204, b: 0 }, //yellow\n];\n\n\nfunction getPreviousPageUrl(pathname) {\n  let url = null;\n  if(/^\\/blog/.test(pathname)) { // 블로그로 시작되면.. 제일 마지막 path로 이동\n    if(pathname === \"/blog\") {\n      url = \"/\";\n    } else {\n      let last = pathname[pathname.length-1] === \"/\" ? \n        pathname.substring(0, pathname.length-1).split(\"/\").pop() : \n        pathname.split(\"/\").pop();\n      url = `/post/${last}/`; \n    }\n  } \n  return url;\n}\n\nconst NotFound = () => {\n  const canvasRef = useRef(null);\n  const [particles, setParticles] = useState([]);\n  const isCreated = useRef(false);\n  const requestRef = useRef(null);\n  const location = useLocation();\n  const url = getPreviousPageUrl(location.pathname);\n  if(url) {\n    return <Redirect noThrow to={url} />;\n  }\n\n  useLayoutEffect(() => {\n    const canvasObj = canvasRef.current;\n    const ctx = canvasObj.getContext('2d');\n    let stageWidth = document.body.clientWidth;\n    let stageHeight = document.body.clientHeight;\n    const pixelRatio = window.devicePixelRatio > 1 ? 2 : 1;\n\n    const totalParticles = 5;\n    const maxRadius = Math.max(Math.floor(stageWidth / 3), 600);\n    const minRadius = Math.max(Math.floor(stageWidth / 5), 300);\n\n    const createParticles = () => {\n      let colorIndex = 0;\n      setParticles([]);\n\n      for (let i = 0; i < totalParticles; i++) {\n        const newParticle = new GlowParticle({\n          x: Math.random() * stageWidth,\n          y: Math.random() * stageHeight,\n          radius: Math.random() * (maxRadius - minRadius) + minRadius,\n          rgb: COLORS[colorIndex],\n        });\n\n        if (++colorIndex >= COLORS.length) colorIndex = 0;\n\n        setParticles((prevParticles) => [...prevParticles, newParticle]);\n      }\n    };\n\n    const render = () => {\n      ctx.clearRect(0, 0, stageWidth, stageHeight);\n      for (let i = 0; i < totalParticles; i++) {\n        const item = particles[i];\n        if (!item) return;\n        item.animate(ctx, stageWidth, stageHeight);\n      }\n      requestRef.current = requestAnimationFrame(render);\n    };\n\n    const resize = () => {\n      stageWidth = document.body.clientWidth;\n      stageHeight = document.body.clientHeight;\n\n      canvasObj.width = stageWidth * pixelRatio;\n      canvasObj.height = stageHeight * pixelRatio;\n      ctx.scale(pixelRatio, pixelRatio);\n      ctx.globalCompositeOperation = 'saturation';\n      ctx.clearRect(0, 0, stageWidth, stageHeight);\n\n      isCreated.current = true;\n      createParticles();\n    };\n\n    const init = () => {\n      if (!isCreated.current) resize();\n      else render();\n    };\n\n    init();\n    window.addEventListener('resize', resize);\n\n    return () => {\n      window.removeEventListener('resize', resize);\n      window.cancelAnimationFrame(requestRef.current);\n    };\n  });\n\n  return (\n    <Layout>\n      <SEO title=\"Not found\" />\n      <Container>\n        <TitleWrap>\n          <Title>404</Title>\n          <Divider />\n          <Desc>Page not found</Desc>\n        </TitleWrap>\n        <Canvas ref={canvasRef} />\n      </Container>\n    </Layout>\n  );\n};\n\nconst Container = styled.main`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgb(255, 45, 85);\n`;\n\nconst Divider = styled.div`\n  width: 100%;\n  height: 4px;\n  margin: 1rem 0 1.5rem 0;\n  background-color: rgba(255, 255, 255, 0.5);\n`;\n\nconst TitleWrap = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  z-index: 1;\n`;\n\nconst Title = styled.h1`\n  color: white;\n  font-size: 8rem;\n`;\n\nconst Desc = styled.h2`\n  color: white;\n  font-size: 2.5rem;\n`;\n\nconst Canvas = styled.canvas`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nexport default NotFound;\n"],"sourceRoot":""}