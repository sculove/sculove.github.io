{"componentChunkName":"component---src-templates-blog-post-js","path":"/post/JavascriptTest/","result":{"data":{"site":{"siteMetadata":{"sponsor":{"buyMeACoffeeId":"Tob0c39"}}},"markdownRemark":{"html":"<p>JavaScript는 사용자 행위를 직접적으로 담당하는 부분이기 때문에, 예외 사항도 많고, 고민해야할 부분도 많다. 뿐만아니라, 사용자의 행위에 따른 대응(?)이 거의 대부분 비동기의 이벤트로 처리하기 때문에, 실제로 무결점의 프로그램을 개발하기는 쉬운 문제가 아니다.</p>\n<p>이 글은 이러한 JavaScript를 효과적으로 테스트하고 유지보수하기 위해, 테스트 환경을 구축하는 간단한 메모이다.</p>\n<h2 id=\"테스트-프레임웍-mocha--chai\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8D-mocha--chai\" aria-label=\"테스트 프레임웍 mocha  chai permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 프레임웍 (Mocha + chai)</h2>\n<p>JavaScript 테스트 프레임웍은 대표적으로 QUnit, Mocha, Jasmine과 같은 프레임웍이 존재한다. 각자 장단점이 있지만, 이 글에서는 가장 확장성이 용이한, mocha에 대해 이야기한다.\n<a href=\"http://mochajs.org/\">mocha</a>는 node와 브라우저 모두에 적용할 수 있고, TDD, BDD, QUnit, export 스타일 모두 적용할 수 있는 프레임웍이다. assertion문 또한, 취향(?)에 따라 선택하여 적용할 수 있다.\n많은 assertion문이 있지만, expect, should, assert를 모두 지원하는 <a href=\"http://chaijs.com/\">chai</a>와 함께 mocha를 사용해 보자.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 499px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACuklEQVQoz0WTiU8TQRTG+z8ZNSgeKAbPaKJRUxAFVBSiAWNEoyZCAUu5AiFpkStCWrDcRMotFTQUSjnc0nJVCLCBki3pba+dz9ktxyQvu5l5+7237/uNBAChAYOuGdU5iSh7dgXlGdfRKMuA7c+kcAQ+EsHBsi+YMa9VY3l0EExXG5b6viPg8YhnhBBIhGdvrRyf7h4jhclnSFFqHJGnxJH8pFOkIOk0YX71CwWJb89BzJ2txNrXQ9yOXRKhnwcjAcIyJjKjbiBbJqOYJ2F+D5Dce8dR/DieKNLioUi7iKLUC2J8fngW5Zk34Nhax5ymETsrVoTBIxj0weeyw+/aRijoRCjsBNPehM0pAyTNilek8EEsyp5fPRQsTU+A6o1UKIKC5FgMN5TDNjoizsbn5rBp/Il/3l0E/Bz87h041q3g1i1YHe6HpCr7DtGW5aBHJSPtlR/QrcyDpigL3SqZ+N5S8hrq3Ez81Y/A5+GwbTVhoa0R3OocnKwFnM0EdlYP++IkVkcGIKFGkMqXt1CVdZvUvEtG7ftHqH6bhIoXN1H3MQ3KHCm+FWZTwSHY9H1g58ZgrC7BtFIOS0c95jVKLHY2ULP0VJB2SLsSZ0h/lQgzo8bQ2Z2DPOW8GHnSkxhvqcEaFeOWDNiY6gdrHMDmRC/d64BtSAt2ehB263hUcM1sFNwUBUueJqD4ySUxStMvQ9gXUPLucZj5qgK3PAY+sIKQk0GAMyHomAHvtyDsYcBolVFTBKsnetXIT4whMmmM2KFgUt79E5THa9hYmhcZ83IcmNYmWLuUcK//QNg1SwWNYA1aWqyCGhVlVkIEGumiEIvmfKHzE+aoq1dgz761D3b4EOxtMwVbU4NlXZ3Y1aKum4LtPQJbECQ8j4MbEw4FwfNHN4OPnkHI2c+jBQi2TNNwsexRXkRAHfgP1KG5CWkzpQYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mocha chaijs\"\n        title=\"mocha chaijs\"\n        src=\"/static/8dc81e9e7c5578f3bacc8e53b799c0e5/119c7/mocha-chaijs.png\"\n        srcset=\"/static/8dc81e9e7c5578f3bacc8e53b799c0e5/222b7/mocha-chaijs.png 163w,\n/static/8dc81e9e7c5578f3bacc8e53b799c0e5/ff46a/mocha-chaijs.png 325w,\n/static/8dc81e9e7c5578f3bacc8e53b799c0e5/119c7/mocha-chaijs.png 499w\"\n        sizes=\"(max-width: 499px) 100vw, 499px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"설치\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"설치 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치</h3>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">npm install mocha chai --save-dev</span></span></span></code></pre>\n<h3 id=\"환경-설정\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"환경 설정 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경 설정</h3>\n<h4 id=\"mocha\" style=\"position:relative;\"><a href=\"#mocha\" aria-label=\"mocha permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mocha</h4>\n<p>mocha는 mocha.opt 파일을 통해 옵션을 설정할 수 있으며, mocha cli를 이용하여 테스트를 진행 할 수 있다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">./node_modules/.bin/mocha</span></span></span></code></pre>\n<h4 id=\"chai\" style=\"position:relative;\"><a href=\"#chai\" aria-label=\"chai permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>chai</h4>\n<p>chai는 chai.expect, chai.should, chai.assert와 같이 사용해야함으로 귀찮다. 전역에 expect, should, assert를 저장하여, 테스트 코드에서는 expect, should, assert를 사용할 수 있도록 하자.\nisomorphic 환경을 위해, require 지원여부에 따라 처리하는 파일을 테스트 파일 전에 포함시킨다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">var</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> expect;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">var</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> assert;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">if</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> (</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">typeof</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> require </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">===</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&#39;function&#39;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">var</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> chai </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">require</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&#39;chai&#39;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  expect </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> chai.expect;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  assert </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> chai.assert;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  chai.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">should</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">} </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">else</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  expect </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> chai.expect;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  chai.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">should</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span></code></pre>\n<blockquote>\n<p><a href=\"https://github.com/chaijs/chai-http\">chai-http</a>를 이용하면 request에 대한 테스트도 할 수 있다.</p>\n</blockquote>\n<h2 id=\"테스트-러너-karma\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%9F%AC%EB%84%88-karma\" aria-label=\"테스트 러너 karma permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 러너 (karma)</h2>\n<p>JavaScript는 브라우저 환경에 따라, 테스트 결과가 달라지기 때문에, 실제 브라우저에서 테스트를 꼭! 해야만한다. 테스트 러너는 여러 환경에서 동일 테스트를 호출 할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+0lEQVQ4y72U20sUcRTHz+xqL2UgPYnQQw9FBF52Znd2d3a9QARdHqqX/oEggqAXIyoEK0VnVguVdHdmNVMrdWddTU10d9UtEKWIiF4tCiLIl3oqr9P5zZ7ZtjWzpwa+nPmd3/l9zuU3uwD/4/HNRLNlyxK3jd8mkf9fgLniPPHItvs7AQtRPpQHVYnaz/xSQreTT0J5KSb/b0AbAY+jDNQK2XryX6f1D7K9/tlhQHHblZ4LXCV7BVVM75Y+UifmOEBKRk2xRdl4DCpm9Z0qHMvxnaJYu9kyAfOsDL4EDjyp2/2pEbY+Roc2yH6h9zVaBy2YN5G+KKtFFw2dved5nz7kvJOP2HsR6lsOdJ3sO/xU9liFSEn9N+A+1CvUQR8OV+xrB/dwV3HVi2m2F88CMegmxhi+1EiV/9kooLWbdkbfcqPjqA9nDMOGFV519bbO+5+PMX8tAVmbm/65mOGOdRuO9luVjtY6EDTFznc0MJsBWvO7gFkMnN1bt66tC6q8WtpQsxfXbgKyyjalqYE1IRwwBFVZct6/s5uBUByvyWmo9XOSEpEjeOA7HjCErmYDN/GQfLboQCG7pM/WZ+LqbzOEUNOKCdWUDgLay0KNGSD45yeg/HEHA78XI+oytlBLBzrFwSADDpjApK7ywcZpIaywvVUzqaacsKAZoDsS4sShIHgn+q+5+tuPOnvusoB6hH5il+SbjZ5nQBz+pZK6y0WUbIOAS7ymFFitY/YoiANBqH79HCoWJgHbBZyNzQwIK6rjXr2j8mW8mCpswQtBf6CWYJYGnWEFnOFA+qfHgjxPHkD1mxS4+to4nBGXBgYKeFU+zON8MG4KdVGKD4Goa7twvxe1iEqhFlDl6ZaxQreuojTwjPaAOBQyq2TlswAEQmnzDfAmdDj3dRH4YBM4zWQyeIKd4Oi+CVIoxOLzM59O9kOzyIgPNcHJ9WUQJyNQMReFkts1tCeDS2sBl9qKCZoz8X98rE1ndwsCZcCb//VPNBeDQ6ertyS29BOSyoYoq0APDAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"karma\"\n        title=\"karma\"\n        src=\"/static/d51cf5bbca77729b97efea2e53d51640/772e8/karma.png\"\n        srcset=\"/static/d51cf5bbca77729b97efea2e53d51640/222b7/karma.png 163w,\n/static/d51cf5bbca77729b97efea2e53d51640/772e8/karma.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>대표적인 툴로 <a href=\"https://karma-runner.github.io/\">Karma</a>가 있다.</p>\n<h3 id=\"mocha와-연동\" style=\"position:relative;\"><a href=\"#mocha%EC%99%80-%EC%97%B0%EB%8F%99\" aria-label=\"mocha와 연동 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mocha와 연동</h3>\n<p>mocha와 연동하기 위해서는 <a href=\"https://github.com/karma-runner/karma-mocha\">karma-mocha</a>를 설치하고, mocha 스타일의 로깅을 보고자 한다면, <a href=\"https://github.com/litixsoft/karma-mocha-reporter\">karma-mocha-repoter</a>를 설치한다.</p>\n<h3 id=\"커버리지-연동\" style=\"position:relative;\"><a href=\"#%EC%BB%A4%EB%B2%84%EB%A6%AC%EC%A7%80-%EC%97%B0%EB%8F%99\" aria-label=\"커버리지 연동 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>커버리지 연동</h3>\n<p>커버리지 툴인 istanbul을 연동하기 위해서는 <a href=\"https://github.com/karma-runner/karma-coverage\">karma-coverage</a>를 설치한다.</p>\n<h3 id=\"브라우저\" style=\"position:relative;\"><a href=\"#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80\" aria-label=\"브라우저 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>브라우저</h3>\n<p>실제 Karma를 이용하여 테스트를 해보니, 꼭 브라우저만 테스트 할 수 있는게 아니라, 여러가지 타스크를 한꺼번에 실행하는 용도로 사용 할 수도 있을 것 같다.\n<a href=\"https://karma-runner.github.io/0.13/config/browsers.html\">https://karma-runner.github.io/0.13/config/browsers.html</a></p>\n<p><a href=\"https://github.com/karma-runner/karma-script-launcher\">karma-script-launcher</a>를 이용하면 다음과 같이 브라우저를 script로 실행할수 있다. 첫번째 파라미터로 url이 전달된다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-6 grvsc-t4tStz-2\">// in the karma.conf.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-5\">browsers</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: [</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&#39;/usr/local/bin/custom-browser.sh&#39;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">],</span></span></span></code></pre>\n<h2 id=\"es6-지원\" style=\"position:relative;\"><a href=\"#es6-%EC%A7%80%EC%9B%90\" aria-label=\"es6 지원 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ES6 지원</h2>\n<p>소스와 테스트 파일을 ES6로 작성한 경우에는 테스트가 실행 되기 전에 사전에 컴파일을 할수 있다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcklEQVQ4y+VUW0tUURQ+vySSglKa7Ky1LbthpiVFD9VDEiGSWEpFGER0IajIhAq60cV8MHuxjAKjJ4OiGyUUkRWGzUw6UzZJWhGimfq11j7nzEzD9NZL9LDmnFnr29/+9lrfPs7PqMHfDOffIByLZI+glsREs+QysD4hY/Tt7/EjzBakzxE/p7gAH9Qy807wBx8lEn58knhvMCoLEJP3Aa+eSaYYrU30pvLOuPyM9DA6Whntlxg3Ja5dZLzoYEsefcS4fJpxp81TrXhVpWSKaT3HGHjOmPRJHX35+opRWEhgQygpIYTyCU3HGYNdjOIiyRUT8mYRmk8I0QdjVUceMvLnEKorSDZQ9Zwi/N5tUFBAaGuUBcMGk33eUVTpjFwXvY8Z8U5GrNNrgfZ03RpCWSnhi4hRbNBzS/jtNWPRAkJFOaFhL+HATkLiGaPvCWO+KF9S5G2mSrQNR/cTpuS4VvnqVYSrF4Q0LqSBQiVcvNArbt9E2FpF6LkvoEE5mvRwWzUhZ7qLus2E/qcMY7zNH9xgVG0g5Oa56L7rkSaPPG8uob1ZkhPGEumklbTrtuTGDK6cZ8yW3t5qYcwUgjP1kofB9SbG1GmuHZo6ITmUUIhQupSwRdSVryW0nGI0HmNPWS1hxXKJZYShl4zK9WRJazcSXJewsozsANU+zvg7g+E3jLMNjCN7CId3E/btILuzAnQwdTWEg7ukDfdERb+xNjl5iFFTSaiXNTo028NwurHVvJ/94w4FRmbP5Am/HvfMbl3gm9/WYmlTDtyvVlCDB09dmLyS4YzrGEldufS89eGfPw4pUBDpVy9bPvlx+L8+sL8Ag6Jm5yaTSvwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"es6 logo\"\n        title=\"es6 logo\"\n        src=\"/static/24a12886ec98125424194a0076fa9d82/772e8/es6-logo.png\"\n        srcset=\"/static/24a12886ec98125424194a0076fa9d82/222b7/es6-logo.png 163w,\n/static/24a12886ec98125424194a0076fa9d82/772e8/es6-logo.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"mocha-1\" style=\"position:relative;\"><a href=\"#mocha-1\" aria-label=\"mocha 1 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mocha</h3>\n<ul>\n<li><code>--compilers</code> 옵션을 이용하여 babel-register,등과 같은 모듈을 이용하여 테스트전에 컴파일 할 수 있다. 하지만, 테스트 환경(node, browser)이 es6을 지원하면 그럴 필요도 없다.</li>\n</ul>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"bash\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">./node_modules/.bin/mocha --compilers js:babel-register</span></span></span></code></pre>\n<ul>\n<li><code>--harmony</code> 옵션을 사용하여 테스트 코드에 대해 ES6을 사용할 수 있다.</li>\n</ul>\n<h3 id=\"karma\" style=\"position:relative;\"><a href=\"#karma\" aria-label=\"karma permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>karma</h3>\n<ul>\n<li>karma의 preprocessors를 이용</li>\n<li><a href=\"https://github.com/babel/karma-babel-preprocessor\">karma-babel-preprocessor</a>를 함께 사용하여, 테스트 전 코드(테스트 코드와, 실제소소)를 변환</li>\n<li>babel 변경시, es6을 umd방식으로 변경해야 정상동작함. (브라우저에서는 commonjs를 지원하지 않음)\n<a href=\"http://stackoverflow.com/questions/33915575/babel-karma-babel-processor-not-converting-es6-es5-for-karma-tests\">http://stackoverflow.com/questions/33915575/babel-karma-babel-processor-not-converting-es6-es5-for-karma-tests</a></li>\n</ul>\n<h2 id=\"mock-up\" style=\"position:relative;\"><a href=\"#mock-up\" aria-label=\"mock up permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mock-up</h2>\n<p>JavaScript는 비동기 상황을 테스트해야하기 때문에, 실제로 테스트 코드를 짜는 것은 굉장히 까다로운 작업이 될수 있다. 이러한 것을 해결하기 위한 하나의 방법으로 stub, mock object를 만드는 방법이 있다.</p>\n<blockquote>\n<p><strong>Mock VS Stub</strong></p>\n</blockquote>\n<ol>\n<li>어떻게 테스트 결과를 검증하는가? (상태 검증 VS 행위 검증)</li>\n<li>테스팅하고 디자인하는 철학적인 차이\n<a href=\"http://martinfowler.com/articles/mocksArentStubs.html\">http://martinfowler.com/articles/mocksArentStubs.html</a></li>\n</ol>\n<h3 id=\"sinonjs\" style=\"position:relative;\"><a href=\"#sinonjs\" aria-label=\"sinonjs permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sinon.JS</h3>\n<p><a href=\"http://sinonjs.org/\">sinon</a>은 spy, stub, mock, fakeTimer, fackHttpRequest, fackServer, 등을 지원하는 단위테스트 프레임웍이다.</p>\n<ul>\n<li>함수 호출 여부(행위)를 검증하고자 한다면, stub를 이용한다. (이벤트의 핸들러 테스트)</li>\n<li><a href=\"http://sinonjs.org/docs/#clock\">timer</a>, <a href=\"http://sinonjs.org/docs/#server\">XMLHTTPRequest</a>의 fake 테스트가 가능</li>\n</ul>\n<p>개인적으로... 써보니 제약은 있지만, 꽤 좋은 라이브러리다.이건 별도로 더 확인해 봐야 겠다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .github-light-theme {\n    background-color: #ffffff;\n    color: #000000;\n  }\n  .github-light-theme .grvsc-tiszgT-1 { color: #000000; }\n  .github-light-theme .grvsc-tiszgT-5 { color: #D73A49; }\n  .github-light-theme .grvsc-tiszgT-8 { color: #032F62; }\n  .github-light-theme .grvsc-tiszgT-7 { color: #005CC5; }\n  .github-light-theme .grvsc-tiszgT-6 { color: #6A737D; }\n  .github-light-theme .grvsc-tiszgT-10 { color: #6F42C1; }\n  .github-light-theme .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body[data-theme=dark] .grvsc-ps-t4tStz { color: #ffffff; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-1 { color: #FFFFFF; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-9 { color: #EB7E81; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-10 { color: #9DCDF5; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-5 { color: #BB97E7; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-2 { color: #A19B8F; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/post/JavascriptTest/#%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8D-mocha--chai\">테스트 프레임웍 (Mocha + chai)</a></p>\n<ul>\n<li><a href=\"/post/JavascriptTest/#%EC%84%A4%EC%B9%98\">설치</a></li>\n<li>\n<p><a href=\"/post/JavascriptTest/#%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\">환경 설정</a></p>\n<ul>\n<li><a href=\"/post/JavascriptTest/#mocha\">mocha</a></li>\n<li><a href=\"/post/JavascriptTest/#chai\">chai</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"/post/JavascriptTest/#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%9F%AC%EB%84%88-karma\">테스트 러너 (karma)</a></p>\n<ul>\n<li><a href=\"/post/JavascriptTest/#mocha%EC%99%80-%EC%97%B0%EB%8F%99\">mocha와 연동</a></li>\n<li><a href=\"/post/JavascriptTest/#%EC%BB%A4%EB%B2%84%EB%A6%AC%EC%A7%80-%EC%97%B0%EB%8F%99\">커버리지 연동</a></li>\n<li><a href=\"/post/JavascriptTest/#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80\">브라우저</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/post/JavascriptTest/#es6-%EC%A7%80%EC%9B%90\">ES6 지원</a></p>\n<ul>\n<li><a href=\"/post/JavascriptTest/#mocha-1\">mocha</a></li>\n<li><a href=\"/post/JavascriptTest/#karma\">karma</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/post/JavascriptTest/#mock-up\">Mock-up</a></p>\n<ul>\n<li><a href=\"/post/JavascriptTest/#sinonjs\">Sinon.JS</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"JavaScript Test","desc":null,"thumbnail":{"childImageSharp":{"fixed":{"src":"/static/8dc81e9e7c5578f3bacc8e53b799c0e5/497c6/mocha-chaijs.png"}}},"date":"2016-05-17","category":"Tech","disableToc":null,"tags":["test","mocha","chai","karma","coverage","sinon"]}}},"pageContext":{"slug":"/post/JavascriptTest/"}},"staticQueryHashes":["1990743003"]}